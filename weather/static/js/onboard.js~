document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('signup-form');
    console.log(form)
    form.addEventListener('submit', function(event) {
        event.preventDefault();

        const locationName = document.getElementById('location_name').value;
        if (locationName) {
            fetch(`{% url "geocode_location" %}?location=${encodeURIComponent(locationName)}`)
            .then(response => response.json())
            .then(response => {
                if (response.latitude && response.longitude) {
                    document.getElementById('location_coordinates').value = response;
                    form.action = "{% url 'onboard' %}"
                    form.submit();
                } else {
                    alert('Location not found. Please try again.');
                }
            })
            .catch(error => {
                alert('An error occurred. Please try again.');
            });
        } else {
            alert('Please enter a location.');
        }
    });
});
